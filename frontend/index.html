<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
    <title>CropSense Prediction</title>
    <link rel="shortcut icon" type="image/png" href='static/plant.svg'>

  </head>

  <body class="bg-green-100 min-h-screen flex items-center justify-center p-4">

    

    <nav class="bg-green-200 fixed w-full z-20 top-0 start-0 border-b border-default   ">
  <div class="max-w-screen-xl flex flex-wrap items-center justify-between mx-auto p-4">
    <a href="#" class="flex items-center space-x-3 rtl:space-x-reverse">
        <img src="static/plant.svg" class="h-7" alt="plant_img">
        <span class="self-center text-2xl text-heading font-semibold whitespace-nowrap">CropSense</span>
    </a>
    <!-- <div class="flex md:order-2 space-x-3 md:space-x-0 rtl:space-x-reverse">
         <button type="button" class="text-black bg-brand hover:bg-brand-strong hover:bg-white hover:text-green-200 box-border border  focus:ring-4 focus:ring-brand-medium shadow-xs font-medium leading-5 rounded-base text-sm px-3 py-2 focus:outline-none ">Get started</button> -->
        <!-- <button data-collapse-toggle="navbar-sticky" type="button" class="inline-flex items-center p-2 w-10 h-10 justify-center text-sm text-body rounded-base md:hidden hover:bg-neutral-secondary-soft hover:text-heading focus:outline-none focus:ring-2 focus:ring-neutral-tertiary" aria-controls="navbar-sticky" aria-expanded="false">
            <span class="sr-only">Open main menu</span>
            <svg class="w-6 h-6" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M5 7h14M5 12h14M5 17h14"/></svg>
        </button> 
    </div>-->
    <div class="items-center justify-center hidden w-full md:flex md:w-auto md:order-1" id="navbar-sticky">
      <ul class="flex flex-col p-4 md:p-0 mt-4 font-medium border border-default rounded-base bg-neutral-secondary-soft md:space-x-8 rtl:space-x-reverse md:flex-row md:mt-0 md:border-0 md:bg-neutral-primary">
        <li>
          <a href="#" class="block py-2 px-3 text-black bg-brand rounded-sm md:bg-transparent md:text-fg-brand md:p-0" aria-current="page">Home</a>
        </li>
        <li>
          <a href="https://overgrow.com/t/soil-testing-a-tutorial-for-ph-n-p-k-solves-most-problems/4719" class="block py-2 px-3 text-heading rounded hover:bg-neutral-tertiary md:hover:bg-transparent md:border-0 md:hover:text-fg-brand md:p-0 md:dark:hover:bg-transparent">Find All Soil info</a>
        </li>
        <!-- <li> -->
          <!-- <a href="#" class="block py-2 px-3 text-heading rounded hover:bg-neutral-tertiary md:hover:bg-transparent md:border-0 md:hover:text-fg-brand md:p-0 md:dark:hover:bg-transparent">Services</a> -->
        <!-- </li> -->
        <li>
          <a href="https://github.com/shahansshetty" class="block py-2 px-3 text-heading rounded hover:bg-neutral-tertiary md:hover:bg-transparent md:border-0 md:hover:text-fg-brand md:p-0 md:dark:hover:bg-transparent">GitHub</a>
        </li>
      </ul>
    </div>
  </div>
    </nav>

    <!-- action="https://cropsense-lbv0.onrender.com/predict" -->
    <form
      method="GET"
      class="bg-white p-8 mt-20 rounded-xl shadow-lg w-full max-w-md space-y-5 "
    >
      <h1 class="text-3xl font-bold text-center mb-4">CropSense</h1>
      <h3 class="text-1xl font-semibold text-center mb-4">
        Using Machine learning for prediction
      </h3>

      <!-- Nitrogen -->
      <div>
        <label class="block mb-1 text-sm font-semibold"
          >Nitrogen (N ppm in soil)</label
        >
        <input
          id="N"
          type="number"
          name="N"
          placeholder="e.g., 100 ."
          class="w-full px-3 py-2 border rounded-lg shadow-sm"
          required
          max="200"
        />
      </div>

      <!-- Phosphorus -->
      <div>
        <label class="block mb-1 text-sm font-semibold"
          >Phosphorus (P ppm in soil)</label
        >
        <input
          type="number"
          name="P"
          id="P"
          placeholder="e.g., 100"
          class="w-full px-3 py-2 border rounded-lg shadow-sm"
          required
          max="200"
        />
      </div>

      <!-- Potassium -->
      <div>
        <label class="block mb-1 text-sm font-semibold">
          Potassium (K ppm in soil)</label
        >
        <input
          max="210"
          type="number"
          name="K"
          id="K"
          placeholder="e.g., 70"
          class="w-full px-3 py-2 border rounded-lg shadow-sm"
          required
        />
      </div>

      <!-- Temperature -->
      <div>
        <label class="block mb-1 text-sm font-semibold">Temperature (Â°C)</label>
        <input
          max="45"
          type="number"
          name="T"
          id="T"
          placeholder="e.g., 22"
          class="w-full px-3 py-2 border rounded-lg shadow-sm"
          required
        />
      </div>

      <!-- Humidity -->
      <div>
        <label class="block mb-1 text-sm font-semibold">Humidity (%)</label>
        <input
          max="100"
          type="number"
          name="H"
          id="H"
          placeholder="e.g., 80"
          class="w-full px-3 py-2 border rounded-lg shadow-sm"
          required
        />
      </div>

      <!-- pH -->
      <div>
        <label class="block mb-1 text-sm font-semibold">Soil pH</label>
        <input
          max="14"
          type="number"
          step="0.1"
          name="pH"
          id="pH"
          placeholder="e.g., 5.5"
          class="w-full px-3 py-2 border rounded-lg shadow-sm"
          required
        />
      </div>

      <!-- Rainfall -->
      <div>
        <label class="block mb-1 text-sm font-semibold"
          >Rainfall (mm per of Rainfall of crop's growing period)</label
        >
        <input
          max="350"
          type="number"
          name="R"
          id="R"
          placeholder="e.g., 250"
          class="w-full px-3 py-2 border rounded-lg shadow-sm"
          required
        />
      </div>

      <!-- Submit Button -->
      <button
        id="submit"
        type="button"
        class="w-full border-2 duration-75 bg-green-600 text-white py-2.5 rounded-lg font-medium shadow hover:bg-white hover:text-green-600 active:bg-green-700 active:text-white"
      >
        Predict Best Crop
      </button>
      <div class="flex-col items-center justify-center ">
        <p class=" text-2xl font-bold underline capitalize" id="display_name"></p>
        <img src="" style="display: none" id="display_img" />
        <p class="text-1xl  " id="display_info"></p>

        <a class="text-1xl  underline text-green hover:text-blue-500 " id="display_link"></p>
      </div>
    </form>
    <script>
      document.getElementById("submit").addEventListener("click", predict);
      async function predict() {
        // const submit=document.getElementById('submit')
        const N = document.getElementById("N").value;
        const P = document.getElementById("P").value;
        const K = document.getElementById("K").value;
        const T = document.getElementById("T").value;
        const H = document.getElementById("H").value;
        const pH = document.getElementById("pH").value;
        const R = document.getElementById("R").value;
        const display_name = document.getElementById("display_name");
        const display_img = document.getElementById("display_img");
        const display_info = document.getElementById("display_info");
        const display_link = document.getElementById("display_link");
         display_name.innerHTML = ' '
         display_img.src = ' '
         display_info.innerHTML= ' '
         display_link.innerHTML = ' '
        try {
          const response = await fetch(
            `https://cropsense-lbv0.onrender.com/predict?N=${N}&P=${P}&K=${K}&T=${T}&H=${H}&pH=${pH}&R=${R}`
          );
          if (!response.ok) {
            throw new Error("Could not fetch");
          }

          const data = await response.json();
          console.log(data)
          
          

          if (data[" crop_name "]) 
          {
            display_name.innerHTML = data[" crop_name "];
            display_name.href=data[" crop_link "]
            display_name.style.padding="2px"
            display_img.src = data[" picture "];
            display_img.style.display='block'
            display_img.style.padding="2px"
            display_info.innerHTML = data[" info "];
            display_info.style.padding="2px"
            display_link.innerHTML = data[" link "];
            display_link.href = data[" link "];
            display_link.style.padding="2px"

          } 
          else if (data.error) 
          {
            display_name.innerHTML = `error: ${data.error} , tip : ${data.inputs}`;
            console.log(data);

          } else 
          {
            display_name.innerHTML = data.error;
          }

        } catch (error) {
          console.log(error);
        }
      }
    </script>
  </body>
</html>
